---
const currentPath = Astro.url.pathname;
---

<header>
	<div class="container">
		<nav>
			<a href="/" class="logo">
				<img src="/xtina-logo-dark.svg" alt="UIUXTINA Design" class="logo-dark" />
				<img src="/xtina-logo-light.svg" alt="UIUXTINA Design" class="logo-light" />
			</a>
			<div>
				<ul>
					<li><a href="/" class={currentPath === '/' ? 'active' : ''}>ABOUT</a></li>
					<li><a href="/work" class={currentPath.startsWith('/work') ? 'active' : ''}>MY WORK</a></li>
					<li><a href="/contact" class={currentPath.startsWith('/contact') ? 'active' : ''}>CONTACT</a></li>
				</ul>
				<button id="theme-toggle" aria-label="Toggle theme">
					<svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<circle cx="12" cy="12" r="5"></circle>
						<line x1="12" y1="1" x2="12" y2="3"></line>
						<line x1="12" y1="21" x2="12" y2="23"></line>
						<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
						<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
						<line x1="1" y1="12" x2="3" y2="12"></line>
						<line x1="21" y1="12" x2="23" y2="12"></line>
						<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
						<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
					</svg>
					<svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
					</svg>
				</button>
			</div>
		</nav>
	</div>
</header>

<style>
	header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 100;
		/* Copied from uiuxtina.webflow.io .navbar-component on 2026-01-24 */
		background-color: transparent;
		backdrop-filter: blur(40px);
		-webkit-backdrop-filter: blur(40px);
	}

	nav {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: var(--spacing-sm) 0;
		gap: var(--spacing-md);
	}

	nav > div {
		display: flex;
		align-items: center;
		gap: var(--spacing-md);
	}

	.logo {
		display: flex;
		align-items: center;
	}

	.logo img {
		height: 60px;
		width: auto;
	}

	/* Show/hide logos based on theme */
	.logo-light {
		display: none;
	}

	:global([data-theme="light"]) .logo-dark {
		display: none;
	}

	:global([data-theme="light"]) .logo-light {
		display: block;
	}

	ul {
		display: flex;
		gap: var(--spacing-md);
		list-style: none;
	}

	nav a {
		color: var(--color-text-muted);
		transition: color 0.2s ease;
	}

	ul a {
		font-family: 'Marcellus', serif;
		font-size: 0.875rem;
		letter-spacing: 0.1em;
		position: relative;
		padding-bottom: 0.25rem;
	}

	ul a::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 1px;
		background-color: var(--color-accent);
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	ul a.active::after {
		opacity: 1;
	}

	ul a:hover {
		color: var(--color-accent);
	}

	nav a:hover,
	.logo:hover {
		color: var(--color-accent);
	}

	#theme-toggle {
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--color-text-muted);
		transition: color 0.2s ease;
	}

	#theme-toggle:hover {
		color: var(--color-accent);
	}

	#theme-toggle svg {
		width: 20px;
		height: 20px;
	}

	/* Show/hide icons based on theme */
	/* Default (dark): show sun icon to switch to light */
	.moon-icon {
		display: none;
	}

	/* Light theme: show moon icon to switch to dark */
	:global([data-theme="light"]) .sun-icon {
		display: none;
	}

	:global([data-theme="light"]) .moon-icon {
		display: block;
	}

	@media (max-width: 768px) {
		.logo img {
			height: 45px;
		}

		ul {
			gap: 0.5rem;
		}

		ul a {
			font-size: 0.7rem;
		}

		nav {
			padding: 0.75rem 0;
		}

		nav > div {
			gap: var(--spacing-sm);
		}

		#theme-toggle svg {
			width: 18px;
			height: 18px;
		}
	}
</style>

<script>
	function setupThemeToggle() {
		const themeToggle = document.getElementById('theme-toggle');
		if (!themeToggle) return;

		themeToggle.addEventListener('click', () => {
			const isLightMode = document.documentElement.getAttribute('data-theme') === 'light';
			const newTheme = isLightMode ? 'dark' : 'light';

			// Dispatch custom event for Layout.astro script to handle
			window.dispatchEvent(new CustomEvent('theme-change', {
				detail: { theme: newTheme }
			}));
		});
	}

	// Run on page load
	setupThemeToggle();

	// Re-run after navigation (for Astro view transitions)
	document.addEventListener('astro:page-load', setupThemeToggle);
</script>
